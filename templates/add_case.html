<!DOCTYPE html>
<html>
<head>
  <title>í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ë“±ë¡</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script>
    function setMode(mode) {
    // UI toggle
    document.getElementById('manual-section').style.display = (mode === 'manual') ? 'block' : 'none';
    document.getElementById('ai-section').style.display = (mode === 'ai') ? 'block' : 'none';

    // ëª¨ë“œ ê°’ ì„¤ì •
    document.getElementById('mode').value = mode;

    // ë²„íŠ¼ ìŠ¤íƒ€ì¼ í† ê¸€
    document.getElementById('btn-manual').classList.toggle('active', mode === 'manual');
    document.getElementById('btn-ai').classList.toggle('active', mode === 'ai');
    }
  </script>
</head>
<body class="container py-5">

  <h1 class="mb-4">ğŸ“ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ë“±ë¡</h1>

  <form method="post" id="caseForm">
  <!-- <form method="post" action="{{ url_for('add_case') }}"> -->
    <!-- ëª¨ë“œ ì„ íƒ -->
    <!-- <div class="btn-group mb-4" role="group">
      <button id="btn-manual" type="button" class="btn btn-outline-primary" onclick="toggleMode('manual')">âœï¸ ìˆ˜ë™ ì…ë ¥</button>
      <button id="btn-ai" type="button" class="btn btn-outline-success" onclick="toggleMode('ai')">ğŸ¤– AI ìë™ ìƒì„±</button>
    </div> -->

    <div class="btn-group mb-4" role="group">
        <button id="btn-manual" type="button" class="btn btn-outline-primary active" onclick="setMode('manual')">âœï¸ ìˆ˜ë™ ì…ë ¥</button>
        <button id="btn-ai" type="button" class="btn btn-outline-success" onclick="setMode('ai')">ğŸ¤– AI ìë™ ìƒì„±</button>
    </div>

    <!-- ê³µí†µ: ëª¨ë“œ hidden í•„ë“œ -->
    <input type="hidden" name="mode" id="mode" value="manual">

    <!-- âœ… ìˆ˜ë™ ì…ë ¥ -->
    <div id="manual-section">
      <div class="mb-3">
        <label for="name" class="form-label">í…ŒìŠ¤íŠ¸ ì´ë¦„</label>
        <input type="text" class="form-control" id="name" name="name" required>
      </div>

      <div class="mb-3">
        <label for="description" class="form-label">ì„¤ëª…</label>
        <textarea class="form-control" id="description" name="description" rows="2"></textarea>
      </div>

      <div class="mb-3">
        <label for="test_function" class="form-label">í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ëª… (functions.py ê¸°ì¤€)</label>
        <select class="form-select" id="test_function" name="test_function" required>
          {% for func in test_functions %}
          <option value="{{ func }}">{{ func }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="mb-3">
        <label for="parameters" class="form-label">íŒŒë¼ë¯¸í„° (JSON í˜•ì‹)</label>
        <textarea class="form-control" id="parameters" name="parameters" rows="4" required>{ "a": 1, "b": 2, "expected": 3 }</textarea>
      </div>
    </div>

    <!-- âœ… AI ìë™ ì…ë ¥ -->
    <div id="ai-section" style="display:none">
      <div class="mb-3">
        <label for="prompt" class="form-label">ìì—°ì–´ ì„¤ëª…</label>
        <textarea class="form-control" name="prompt" id="prompt" rows="4"
          placeholder="ì˜ˆ: 2ì™€ 3ì„ ë”í–ˆì„ ë•Œ 5ê°€ ë˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ë§Œë“¤ì–´ì¤˜"></textarea>
      </div>
    </div>

    <!-- ë¯¸ë¦¬ë³´ê¸° ê²°ê³¼ -->
    {% if ai_case %}
    <hr>
    <h4>âœ… ìƒì„±ëœ ì¼€ì´ìŠ¤ ë¯¸ë¦¬ë³´ê¸°</h4>
    <pre>{{ ai_case | tojson(indent=2) }}</pre>
    {% endif %}

    <!-- ë²„íŠ¼ -->
    <button type="submit" class="btn btn-primary">ğŸ’¾ ì €ì¥</button>
    <a href="/" class="btn btn-secondary ms-2">â† ëŒì•„ê°€ê¸°</a>
  </form>
</body>
</html>
